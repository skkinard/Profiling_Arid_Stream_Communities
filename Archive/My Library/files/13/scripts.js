!function(s){s(function(){return"undefined"!=typeof angular&&void("true"===supapress_config.angularjs_support&&angular.module("supapressAngular",[]).run(["$window","$rootScope","$location",function(s,a,e){s.supapress=s.supapress||{},s.supapress.angular=s.supapress.angular||{},s.supapress.angular.changeURL=function(s){a.$apply(function(){e.url(s.replace(window.supapress_config.blog_details.site_url,""))})}}]))})}(jQuery),function(s){s("body").on("DOMNodeInserted",function(a){var e,r,p=s(a.target),n=function(a){a.each(function(){var a=s(this);a.data("supapressInitialised")||a.supapressSearchInit()})},t=function(a){a.each(function(){var a=s(this);a.data("supapressInitialised")||a.supapressInit()})};p.is("div.supapress")?(e=p.find(".search"),r=p.find(".isbn-carousel"),n(e),t(r)):p.find("div.supapress").length>0&&p.find("div.supapress").each(function(a,p){var i=s(p);e=i.find(".search"),r=i.find(".isbn-carousel"),n(e),t(r)})})}(jQuery),function(s){window.supapress=window.supapress||{};var a=function(s,a,e){var r;return function(){var p=this,n=arguments,t=function(){r=null,e||s.apply(p,n)},i=e&&!r;clearTimeout(r),r=setTimeout(t,a),i&&s.apply(p,n)}};supapress.gridAlign=function(s,a){var e=a.find("[data-baseline-images=wrapper]");e.height(s),e.find("[data-baseline-images=image]").addClass("baselined"),a.data("aligned",!0)},supapress.showRetailerLinks=function(a,e){a.on("click",function(a){s(this).next().hasClass("open")?s(this).next().removeClass("open"):(e.find(".sp__the-retailers--list.open").removeClass("open"),s(this).next().addClass("open"))})},supapress.setMaxCoverHeight=function(a){var e=a.find("[data-baseline-images=wrapper]"),r=e.find("[data-baseline-images=image]"),p=a.data("carouselSettings")||{},n=0,t=0,i=!1;e.addClass("image-wrapper"),r.addClass("supapress-book-cover"),"undefined"!=typeof p.lazyLoad&&a.on("beforeChange",function(){i=!0}),a.data("aligned")?r.each(function(e){var p=s(this);p.height()>t&&(t=p.height()),e===r.length-1&&supapress.gridAlign(t,a)}):r.on("load",function(e){var u=s(this);if("undefined"!=typeof p.lazyLoad&&u.attr("src")===p.lazyLoadPlaceholder||(n++,u.off("load")),u.height()>t&&(t=u.height()),n===r.length||"undefined"!=typeof p.lazyLoad&&(n===p.slidesToShow||i))return i=!1,supapress.gridAlign(t,a)}).each(function(){this.complete&&s(this).trigger("load")})},s.fn.supapressInit=function(){var e=this;if(e.hasClass("isbn-carousel")&&"undefined"!=typeof s.fn.slick){e.parent().css("overflow","visible");var r=e.find('[data-container="carousel"]');1===r.length?r.slick(e.data("carouselSettings")):e.slick(e.data("carouselSettings"))}if(e.hasClass("isbn-grid")||e.hasClass("isbn-carousel")||e.hasClass("isbn-list")){var p=e.find(".js-show-sp__the-retailers");supapress.showRetailerLinks(p,e)}if(e.hasClass("isbn-grid")||e.hasClass("isbn-carousel")||e.hasClass("search-grid")){var n=a(function(){supapress.setMaxCoverHeight(e)},300);s(window).on("resize orientationchange",n)}e.data("supapressInitialised",!0)},s("div.supapress > div").each(function(){s(this).supapressInit()}),s(window).trigger("resize")}(jQuery),function(s){window.supapress=window.supapress||{},supapress.$searchLayout=null,supapress.$sortBy=null,supapress.$perPage=null,supapress.$pagination=null,supapress.$previous=null,supapress.$page=null,supapress.$next=null,supapress.ajaxURL=null,supapress.params=null,supapress.current=null,supapress.total=null,supapress.reload=function(a,e){var r=window.location.protocol+"//"+window.location.hostname+window.location.pathname;if("undefined"!=typeof a&&"undefined"!=typeof e){var p=window.location.search.substring(1),n=p.split("&");p="";for(var t=0;t<n.length;t++){var i=n[t].split("=");""===i[0]||"undefined"==typeof i[1]&&i[0]!==a||""===i[1]&&i[0]!==a||i[0]===a&&e===!1||("page_number"===i[0]&&"page_number"!==a&&(i[1]=1),p+=""===p?"":"&",p+=i[0]+"=",p+=i[0]===a?e:i[1])}var u=new RegExp(a+"=","g");u.test(p)===!1&&e!==!1&&(p+=""===p?"":"&",p+=a+"="+e),""!==s.trim(p)?supapress.changeLocationHref(r+"?"+p):supapress.changeLocationHref(r)}else supapress.changeLocationHref(r)},supapress.changeLocationHref=function(s){"undefined"!=typeof angular&&"true"===supapress_config.angularjs_support?supapress.angular.changeURL(s):window.location.href=s},supapress.loadFilters=function(){s.each(supapress.$searchLayout.find(".filter-load-wrapper"),function(){var a=s(this);s.ajax({url:supapress.ajaxURL+"?action=supapress_filters",type:"GET",data:{params:supapress.params,showText:a.data("show-text"),hideText:a.data("hide-text"),clearText:a.data("clear-text"),limits:a.data("filter-limits"),filters:a.data("filters")},success:function(e){a.html(e).removeClass("preloader-on"),a.find("a").on("click",function(a){var e=s(this);e.hasClass("clear-filters")?supapress.reload():e.hasClass("clear-filter")&&e.attr("data-name")?supapress.reload(e.attr("data-name"),!1):e.attr("data-name")&&e.attr("data-seo")&&supapress.reload(e.attr("data-name"),e.attr("data-seo"))}),a.find(".additional-filters").each(function(a,e){var r=s(e),p=r.height();r.css("height",p).data("height",p).css("maxHeight",0)}),a.find(".additional-filters-toggle").on("click",function(){var a=s(this),e=a.parents(".filter-block").find(".additional-filters");"0px"!==e.css("maxHeight")?(a.text(a.data("showLabel")),e.css("maxHeight",0)):(a.text(a.data("hideLabel")),e.css("maxHeight",e.data("height")))})}})})},s.fn.supapressSearchInit=function(){supapress.$searchLayout=this,supapress.$sortBy=supapress.$searchLayout.find(".supapress-sort-by"),supapress.$perPage=supapress.$searchLayout.find(".supapress-per-page"),supapress.$pagination=supapress.$searchLayout.find(".supapress-pagination-wrapper"),supapress.$previous=supapress.$pagination.find(".supapress-previous"),supapress.$page=supapress.$pagination.find(".supapress-page"),supapress.$next=supapress.$pagination.find(".supapress-next"),supapress.ajaxURL=supapress.$searchLayout.parents(".supapress").data("ajax-url"),supapress.params=supapress.$searchLayout.parents(".supapress").data("widget-params"),supapress.current=parseInt(supapress.$pagination.attr("data-current")),supapress.total=parseInt(supapress.$pagination.attr("data-total")),supapress.loadFilters(),supapress.$sortBy.on("change",function(){supapress.reload("supapress_order",s(this).val())}),supapress.$perPage.on("change",function(){supapress.reload("amount",s(this).val())}),supapress.$previous.on("click",function(){1===supapress.current?supapress.reload("page_number",supapress.total):supapress.reload("page_number",supapress.current-1)}),supapress.$page.on("click",function(){supapress.reload("page_number",s(this).attr("data-page"))}),supapress.$next.on("click",function(){supapress.current===supapress.total?supapress.reload("page_number",1):supapress.reload("page_number",supapress.current+1)}),supapress.$searchLayout.data("supapressInitialised",!0)},s("div.supapress .search").supapressSearchInit()}(jQuery);
//# sourceMappingURL=scripts.min.js.map
