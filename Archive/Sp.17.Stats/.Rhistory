# Set Work Directory
setwd("C:\Users\s2kin\Dropbox\Research\Manuscipts\Diss.2_Gradient\Sp.17.Stats\sp17_r_scripts")
file.choose()
# Set Work Directory
setwd("C:\\Users\\s2kin\\Dropbox\\Research\\Manuscipts\\Diss.2_Gradient\\Sp.17.Stats\\sp17_r_scripts")
# Import gauges ii Climate Data
library(readr)
climate <- read.csv("sp17_data_files\\conterm_climate.txt")
basin <- read.csv("sp17_data_files\\conterm_lc06_basin.txt")
soils <- read.csv("sp17_data_files\\conterm_soils.txt")
rip <- read.csv("sp17_data_files\\conterm_lc06_rip100.txt")
# Extract Station IDs (STAIDs)
sites <- c("8189700", "8068390", "8115000", "8164600", "8189300", "8189500", "8177300", "8164800", "8211900", "8212300")
as.factor(climate$STAID)
climate <- subset(climate, STAID %in% sites)
basin <- subset(basin, STAID %in% sites)
climate <- read.csv("sp17_data_files\\conterm_climate.txt")
# Set Work Directory
setwd("C:\\Users\\s2kin\\Dropbox\\Research\\Manuscipts\\Diss.2_Gradient\\Sp.17.Stats")
# Import gauges ii Climate Data
library(readr)
climate <- read.csv("sp17_data_files\\conterm_climate.txt")
basin <- read.csv("sp17_data_files\\conterm_lc06_basin.txt")
soils <- read.csv("sp17_data_files\\conterm_soils.txt")
rip <- read.csv("sp17_data_files\\conterm_lc06_rip100.txt")
# Extract Station IDs (STAIDs)
sites <- c("8189700", "8068390", "8115000", "8164600", "8189300", "8189500", "8177300", "8164800", "8211900", "8212300")
as.factor(climate$STAID)
climate <- subset(climate, STAID %in% sites)
basin <- subset(basin, STAID %in% sites)
soils <- subset(soils, STAID %in% sites)
rip <- subset(rip, STAID %in% sites)
# Substitute Soils from SFC to TRC STAID
row_to_add = climate[which(climate[,1]=="8211900"),]
row_to_add[1,1] <- 8212300
row_to_add
climate = rbind(climate, row_to_add)
climate[,1:3]
row_to_add = basin[which(basin[,1]=="8211900"),]
row_to_add[1,1] <- 8212300
row_to_add
basin = rbind(basin, row_to_add)
basin[,1:3]
row_to_add = soils[which(soils[,1]=="8211900"),]
row_to_add[1,1] <- 8212300
row_to_add
soils = rbind(soils, row_to_add)
soils[,1:3]
row_to_add = rip[which(climate[,1]=="8211900"),]
row_to_add[1,1] <- 8212300
row_to_add
rip = rbind(rip, row_to_add)
rip[,1:3]
MyMerge <- function(x, y){                                                      # Merge gauge data
df <- merge(x, y, by= "STAID", all.x= TRUE, all.y= TRUE)
return(df)
}
gauges <- Reduce(MyMerge, list(climate,basin,soils,rip))
habitat <- read.csv("Spring2017.Stream.Habitat.csv", fileEncoding="UTF-8-BOM")  # Load in situ data
flow <- read.csv("USGS_FlowMetrics.csv", fileEncoding = "UTF-8-BOM")            # Load calculated flow metrics
# Merge data.frames
names(gauges)[1] <- "USGS.gauge"
env_covariates <- merge(gauges, habitat, by = "USGS.gauge")
env_covariates <- merge(env_covariates, flow, by = "USGS.gauge")
# USE Low Range nitrate concentrations. Substitute High range Nitrate where necessary
HR_NO3 <- which(env_covariates$NO3.NO2 > 1)
env_covariates$NO3..N.LR.[c(HR_NO3)] <- env_covariates$NO3.NO2[c(HR_NO3)]
View(env_covariates)
col.names(env_covariate)
col.names(env_covariates)
colnames(env_covariates)
gaugestable <- c("USGS.gauge","PPTAVG_BASIN","T_AVG_BASIN", "ELEV_SITE_M", "SLOPE_PCT" "T_MIN_BASIN","T_MAX_BASIN","PLANTNLCD06","DEVNLCD06","PERMAVE","OMAVE", "CLAYAVE","SILTAVE", "SANDAVE", ,)
env_covariates <- env_covariates[,c(which (names(env_covariates) %in% gaugestable == TRUE))]
colnames(env_covariates)
gaugestable <- c("USGS.gauge",
"PPTAVG_BASIN",
"T_AVG_BASIN",
"ELEV_SITE_M",
"SLOPE_PCT",
"T_MIN_BASIN",
"T_MAX_BASIN",
"PLANTNLCD06",
"DEVNLCD06",
"PERMAVE",
"OMAVE",
"CLAYAVE",
"SILTAVE",
"SANDAVE")
env_covariates <- env_covariates[,c(which (names(env_covariates) %in% gaugestable == TRUE))]
View(env_covariates)
write.csv(env_covariates,"C:\\Users\\Sean\\Desktop\\Dropbox\\Research\\Manuscipts\\Diss.2_Gradient\\Sp.17.Stats\\TCP_env_x_site.csv", row.names = FALSE)
env_covariates
env_covariates
file.choose()
vardesc <- read.csv("C:\\Users\\s2kin\\Dropbox\\Research\\Manuscipts\\Diss.2_Gradient\\Sp.17.Stats\\Sp17_gaugesconcotenated.csv"
head(vardesc)
vardesc <- read_csv("C:\\Users\\s2kin\\Dropbox\\Research\\Manuscipts\\Diss.2_Gradient\\Sp.17.Stats\\Sp17_gaugesconcotenated.csv"
head(vardesc)
vardesc <- read.csv("Sp17_gaugesconcotenated.csv"
vardesc
getwd()
vardesc <- read.csv("Sp17_gaugesconcotenated.csv")
vardesc
vardesc <- read.csv("Sp17_gaugesconcotenated.csv")
View(vardesc)
file.choose()
vardesc <- read.csv("sp17_data_files\\Sp17_gaugesconcotenated.csv")
head(vardesc)
which(vardesc$VARIABLE_NAME == "USGS.gauge" |
vardesc$VARIABLE_NAME =="PPTAVG_BASIN" |
vardesc$VARIABLE_NAME =="T_AVG_BASIN" |
vardesc$VARIABLE_NAME =="ELEV_SITE_M" |
vardesc$VARIABLE_NAME =="SLOPE_PCT" |
vardesc$VARIABLE_NAME =="T_MIN_BASIN" |
vardesc$VARIABLE_NAME =="T_MAX_BASIN" |
vardesc$VARIABLE_NAME =="PLANTNLCD06" |
vardesc$VARIABLE_NAME =="DEVNLCD06" |
vardesc$VARIABLE_NAME =="PERMAVE"|
vardesc$VARIABLE_NAME =="OMAVE"|
vardesc$VARIABLE_NAME =="CLAYAVE"|
vardesc$VARIABLE_NAME =="SILTAVE"|
vardesc$VARIABLE_NAME =="SANDAVE")
colnames(vardesc)
vardesc[c(myvars),c(2:13)
vardesc[c(myvars),c(2:13)]
vardesc[c(myvars),c(2:13)]
myvars <- which(vardesc$VARIABLE_NAME == "USGS.gauge" |
vardesc$VARIABLE_NAME =="PPTAVG_BASIN" |
vardesc$VARIABLE_NAME =="T_AVG_BASIN" |
vardesc$VARIABLE_NAME =="ELEV_SITE_M" |
vardesc$VARIABLE_NAME =="SLOPE_PCT" |
vardesc$VARIABLE_NAME =="T_MIN_BASIN" |
vardesc$VARIABLE_NAME =="T_MAX_BASIN" |
vardesc$VARIABLE_NAME =="PLANTNLCD06" |
vardesc$VARIABLE_NAME =="DEVNLCD06" |
vardesc$VARIABLE_NAME =="PERMAVE"|
vardesc$VARIABLE_NAME =="OMAVE"|
vardesc$VARIABLE_NAME =="CLAYAVE"|
vardesc$VARIABLE_NAME =="SILTAVE"|
vardesc$VARIABLE_NAME =="SANDAVE")
vardesc[c(myvars),c(2:13)]
vardesc[c(myvars),c(2:5)]
env_var <- vardesc[c(myvars),c(2:5)]
env_var <- vardesc[c(myvars),c(2:5)]
View(env_var)
env_var <- vardesc[c(myvars),c(2:13)]
View(env_var)
env_var <- vardesc[c(myvars),c(2:5,12:13)]
env_var
myvars
collnames(vardesc)
colnames(vardesc)
env_var <- vardesc[c(myvars),c(2,3,6,12:13)]
env_var <- vardesc[c(myvars),c(2,3,6,12:13)]
View(env_var)
env_var
gaugestable
env_covariates
setwd("C:\\Users\\s2kin\\Dropbox\\Research\\Manuscipts\\Diss.2_Gradient\\Sp.17.Stats")
# Import gauges ii Climate Data
library(readr)
climate <- read.csv("sp17_data_files\\conterm_climate.txt")
basin <- read.csv("sp17_data_files\\conterm_lc06_basin.txt")
soils <- read.csv("sp17_data_files\\conterm_soils.txt")
rip <- read.csv("sp17_data_files\\conterm_lc06_rip100.txt")
# Extract Station IDs (STAIDs)
sites <- c("8189700", "8068390", "8115000", "8164600", "8189300", "8189500", "8177300", "8164800", "8211900", "8212300")
as.factor(climate$STAID)
climate <- subset(climate, STAID %in% sites)
basin <- subset(basin, STAID %in% sites)
soils <- subset(soils, STAID %in% sites)
rip <- subset(rip, STAID %in% sites)
# There are 12/13 STAIDs present: TRC (821300) is not Present in Gauges II. Since TRC (821300) is located within the same overall watershed as SFC (8211900), I will replicate the climate data from SFC and use it to create a new row for TRC. We are only interested in Average rainfall in our final analysis, but this step will enable exploratory analysis with the 10 sites with the climate data being the same for SFC and TRC.
# Substitute Soils from SFC to TRC STAID
row_to_add = climate[which(climate[,1]=="8211900"),]
row_to_add[1,1] <- 8212300
row_to_add
climate = rbind(climate, row_to_add)
climate[,1:3]
row_to_add = basin[which(basin[,1]=="8211900"),]
row_to_add[1,1] <- 8212300
row_to_add
basin = rbind(basin, row_to_add)
basin[,1:3]
row_to_add = soils[which(soils[,1]=="8211900"),]
row_to_add[1,1] <- 8212300
row_to_add
soils = rbind(soils, row_to_add)
soils[,1:3]
row_to_add = rip[which(climate[,1]=="8211900"),]
row_to_add[1,1] <- 8212300
row_to_add
rip = rbind(rip, row_to_add)
rip[,1:3]
MyMerge <- function(x, y){                                                      # Merge gauge data
df <- merge(x, y, by= "STAID", all.x= TRUE, all.y= TRUE)
return(df)
}
gauges <- Reduce(MyMerge, list(climate,basin,soils,rip))
habitat <- read.csv("Spring2017.Stream.Habitat.csv", fileEncoding="UTF-8-BOM")  # Load in situ data
flow <- read.csv("USGS_FlowMetrics.csv", fileEncoding = "UTF-8-BOM")            # Load calculated flow metrics
# Merge data.frames
names(gauges)[1] <- "USGS.gauge"
env_covariates <- merge(gauges, habitat, by = "USGS.gauge")
env_covariates <- merge(env_covariates, flow, by = "USGS.gauge")
# USE Low Range nitrate concentrations. Substitute High range Nitrate where necessary
HR_NO3 <- which(env_covariates$NO3.NO2 > 1)
env_covariates$NO3..N.LR.[c(HR_NO3)] <- env_covariates$NO3.NO2[c(HR_NO3)]
env_covariates
colnames(env_covariates)
file.choose()
library(readr)
climate <- read.csv("sp17_data_files\\conterm_climate.txt")
basin <- read.csv("sp17_data_files\\conterm_lc06_basin.txt")
soils <- read.csv("sp17_data_files\\conterm_soils.txt")
rip <- read.csv("sp17_data_files\\conterm_lc06_rip100.txt")
topo <- read.csv("conterm_topo.txt")
# Extract Station IDs (STAIDs)
sites <- c("8189700", "8068390", "8115000", "8164600", "8189300", "8189500", "8177300", "8164800", "8211900", "8212300")
as.factor(climate$STAID)
climate <- subset(climate, STAID %in% sites)
basin <- subset(basin, STAID %in% sites)
soils <- subset(soils, STAID %in% sites)
rip <- subset(rip, STAID %in% sites)
topo <- subset(topo, STAID %in% sites)
# There are 12/13 STAIDs present: TRC (821300) is not Present in Gauges II. Since TRC (821300) is located within the same overall watershed as SFC (8211900), I will replicate the climate data from SFC and use it to create a new row for TRC. We are only interested in Average rainfall in our final analysis, but this step will enable exploratory analysis with the 10 sites with the climate data being the same for SFC and TRC.
# Substitute Soils from SFC to TRC STAID
row_to_add = climate[which(climate[,1]=="8211900"),]
row_to_add[1,1] <- 8212300
row_to_add
climate = rbind(climate, row_to_add)
climate[,1:3]
row_to_add = basin[which(basin[,1]=="8211900"),]
row_to_add[1,1] <- 8212300
row_to_add
basin = rbind(basin, row_to_add)
basin[,1:3]
row_to_add = soils[which(soils[,1]=="8211900"),]
row_to_add[1,1] <- 8212300
row_to_add
soils = rbind(soils, row_to_add)
soils[,1:3]
row_to_add = rip[which(climate[,1]=="8211900"),]
row_to_add[1,1] <- 8212300
row_to_add
rip = rbind(rip, row_to_add)
rip[,1:3]
MyMerge <- function(x, y){                                                      # Merge gauge data
df <- merge(x, y, by= "STAID", all.x= TRUE, all.y= TRUE)
return(df)
}
gauges <- Reduce(MyMerge, list(climate,basin,soils,rip, topo))
habitat <- read.csv("Spring2017.Stream.Habitat.csv", fileEncoding="UTF-8-BOM")  # Load in situ data
flow <- read.csv("USGS_FlowMetrics.csv", fileEncoding = "UTF-8-BOM")            # Load calculated flow metrics
# Merge data.frames
names(gauges)[1] <- "USGS.gauge"
env_covariates <- merge(gauges, habitat, by = "USGS.gauge")
env_covariates <- merge(env_covariates, flow, by = "USGS.gauge")
# USE Low Range nitrate concentrations. Substitute High range Nitrate where necessary
HR_NO3 <- which(env_covariates$NO3.NO2 > 1)
env_covariates$NO3..N.LR.[c(HR_NO3)] <- env_covariates$NO3.NO2[c(HR_NO3)]
gaugestable <- c("USGS.gauge",
"PPTAVG_BASIN",
"T_AVG_BASIN",
"ELEV_SITE_M",
"SLOPE_PCT",
"T_MIN_BASIN",
"T_MAX_BASIN",
"PLANTNLCD06",
"DEVNLCD06",
"PERMAVE",
"OMAVE",
"CLAYAVE",
"SILTAVE",
"SANDAVE")
env_covariates <- env_covariates[,c(which (names(env_covariates) %in% gaugestable == TRUE))]
env_covariates
